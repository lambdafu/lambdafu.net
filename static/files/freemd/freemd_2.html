<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<!-- Created on January, 20  2003 by texi2html 1.65 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HEAD>
<TITLE>The FreeMD Manual: Preparation</TITLE>

<META NAME="description" CONTENT="The FreeMD Manual: Preparation">
<META NAME="keywords" CONTENT="The FreeMD Manual: Preparation">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.65">

</HEAD>

<BODY LANG="en" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<A NAME="SEC5"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_1.html#SEC4"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_2.html#SEC6"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_3.html#SEC10"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd.html#SEC_Top"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_3.html#SEC10"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_7.html#SEC56">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H1> 2. Preparation </H1>
<!--docid::SEC5::-->
<P>

To use FreeMD, you have to perform some changes to your
sources and the build system.  The necessary changes are small and
explained in the following sections.  At the end of this chapter, it
is described how the library is initialized, and how the requirements
of the library are verified.
</P><P>

<BLOCKQUOTE><TABLE BORDER=0 CELLSPACING=0> 
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="freemd_2.html#SEC6">2.1 Header</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">What header file you need to include.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="freemd_2.html#SEC7">2.2 Building the Source</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Compiler options to be used.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="freemd_2.html#SEC8">2.3 Using Automake</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">Compiler options to be used the easy way.</TD></TR>
<TR><TD ALIGN="left" VALIGN="TOP"><A HREF="freemd_2.html#SEC9">2.4 Multi Threading</A></TD><TD>&nbsp;&nbsp;</TD><TD ALIGN="left" VALIGN="TOP">How FreeMD can be used in an MT environment.</TD></TR>
</TABLE></BLOCKQUOTE>
<P>

<A NAME="Header"></A>
<HR SIZE="6">
<A NAME="SEC6"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_2.html#SEC5"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_2.html#SEC7"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_2.html#SEC5"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_2.html#SEC5"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_3.html#SEC10"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_7.html#SEC56">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 2.1 Header </H2>
<!--docid::SEC6::-->
<P>

All interfaces (data types and functions) of the library are defined
in the header file `freemd.h'.  You must include this in all programs
using the library, either directly or through some other header file,
like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>#include &#60;freemd.h&#62;
</pre></td></tr></table></P><P>

The name space of FreeMD is <CODE>freemd_*</CODE> for symbol names and
<CODE>FREEMD_*</CODE> for macros.  Exported symbols internal to FreeMD take
the form <CODE>_freemd_*</CODE>.
</P><P>

Because FreeMD links to the USB library, linking to FreeMD will also
use the namespace of that library indirectly.
</P><P>

<A NAME="Building the Source"></A>
<HR SIZE="6">
<A NAME="SEC7"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_2.html#SEC6"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_2.html#SEC8"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_2.html#SEC8"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_2.html#SEC5"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_3.html#SEC10"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_7.html#SEC56">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 2.2 Building the Source </H2>
<!--docid::SEC7::-->
<P>

If you want to compile a source file including the `freemd.h' header
file, you must make sure that the compiler can find it in the
directory hierarchy.  This is accomplished by adding the path to the
directory in which the header file is located to the compilers include
file search path (via the `<SAMP>-I</SAMP>' option).
</P><P>

However, the path to the include file is determined at the time the
source is configured.  To solve this problem, FreeMD ships with a small
helper program <CODE>freemd-config</CODE> that knows about the path to the
include file and other configuration options.  The options that need
to be added to the compiler invocation at compile time are output by
the `<SAMP>--cflags</SAMP>' option to <CODE>freemd-config</CODE>.  The following
example shows how it can be used at the command line:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>gcc -c foo.c `freemd-config --cflags`
</pre></td></tr></table></P><P>

Adding the output of `<SAMP>freemd-config --cflags</SAMP>' to the compilers
command line will ensure that the compiler can find the FreeMD header
file.
</P><P>

A similar problem occurs when linking the program with the library.
Again, the compiler has to find the library files.  For this to work,
the path to the library files has to be added to the library search
path (via the `<SAMP>-L</SAMP>' option).  For this, the option
`<SAMP>--libs</SAMP>' to <CODE>freemd-config</CODE> can be used.  For
convenience, this option also outputs all other options that are
required to link the program with FreeMD (in particular, the
`<SAMP>-lfreemd</SAMP>' option).  The example shows how to link `<TT>foo.o</TT>'
with the FreeMD library to a program <CODE>foo</CODE>.
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>gcc -o foo foo.o `freemd-config --libs`
</pre></td></tr></table></P><P>

Of course you can also combine both examples to a single command by
specifying both options to <CODE>freemd-config</CODE>:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>gcc -o foo foo.c `freemd-config --cflags --libs`
</pre></td></tr></table></P><P>

<A NAME="Using Automake"></A>
<HR SIZE="6">
<A NAME="SEC8"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_2.html#SEC7"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_2.html#SEC9"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_2.html#SEC9"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_2.html#SEC5"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_3.html#SEC10"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_7.html#SEC56">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 2.3 Using Automake </H2>
<!--docid::SEC8::-->
<P>

It is much easier if you use GNU Automake instead writing your own
Makefiles.  If you do that you don't have to worry about finding and
invoking the <CODE>freemd-config</CODE> script at all.  FreeMD provides
an extension to Automake that does all the work for you.
</P><P>

<A NAME="IDX1"></A>
<DL>
<DT><U>Macro:</U> <B>AM_PATH_FREEMD</B> <I>([<VAR>minimum-version</VAR>], [<VAR>action-if-found</VAR>], [<VAR>action-if-not-found</VAR>])</I>
<DD>Check whether FreeMD (at least version <VAR>minimum-version</VAR>, if
given) exists on the host system.  If it is found, execute
<VAR>action-if-found</VAR>, otherwise do <VAR>action-if-not-found</VAR>, if
given.
</P><P>

Additionally, the function defines <CODE>FREEMD_CFLAGS</CODE> to the flags
needed for compilation of the program to find the `<TT>freemd.h</TT>'
header file, and <CODE>FREEMD_LIBS</CODE> to the linker flags needed to link
the program to the FreeMD library.
</DL>
</P><P>

You can use the defined Autoconf variables like this in your
`<TT>Makefile.am</TT>':
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>AM_CPPFLAGS = $(FREEMD_CFLAGS)
LDADD = $(FREEMD_LIBS)
</pre></td></tr></table></P><P>

<A NAME="Multi Threading"></A>
<HR SIZE="6">
<A NAME="SEC9"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_2.html#SEC8"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_3.html#SEC10"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_2.html#SEC5"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_2.html#SEC5"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_3.html#SEC10"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_7.html#SEC56">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<H2> 2.4 Multi Threading </H2>
<!--docid::SEC9::-->
<P>

The <FONT SIZE="-1">freemd</FONT> library is not thread-safe.
</P><P>

<A NAME="Error Handling"></A>
<HR SIZE="6">
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_2.html#SEC5"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_3.html#SEC10"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_7.html#SEC56">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="freemd_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<BR>  
<FONT SIZE="-1">
This document was generated
by <I>Marcus Brinkmann</I> on <I>January, 20  2003</I>
using <A HREF="http://www.mathematik.uni-kl.de/~obachman/Texi2html
"><I>texi2html</I></A>
</FONT>

</BODY>
</HTML>
